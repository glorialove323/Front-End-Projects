<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Document</title>
    <style type="text/css">
    #div1 {
        width: 100px;
        height: 100px;
        background: red;
        position: absolute;
    }
    </style>
    <script type="text/javascript">
    // 把功能抽象成一个函数
    function getPos(ev) {
        var scrollTop = document.documentElement.scrollTop || document.body.scrollTop;
        var scrollLeft = document.documentElement.scrollLeft || document.body.scrollLeft;

        return {
            x: ev.clientX + scrollLeft,
            y: ev.clientY + scrollTop
        };
    }
    document.onmousemove = function(ev) {
        var oEvent = ev || event;
        var oDiv = document.getElementById('div1');
        // var scrollTop = document.documentElement.scrollTop||document.body.scrollTop;
        // var scrollLeft = document.documentElement.scrollLeft||document.body.scrollLeft;
        /*oDiv.style.left = oEvent.clientX + scrollLeft + 'px';
        oDiv.style.top = oEvent.clientY + scrollTop + 'px';*/        
        var pos = getPos(oEvent);
        oDiv.style.left = pos.x + 'px';
        oDiv.style.top = pos.y + 'px';
    }
    </script>
</head>

<body style="height: 2000px;">
    <div id="div1"></div>
</body>

</html>
